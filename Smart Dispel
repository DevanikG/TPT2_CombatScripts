waituntil(health(false)>0.0)
dispel = 3
waituntil(negative() >= 1)
useinstant(dispel)
goto(3)

:local int dispel

wakeup()
